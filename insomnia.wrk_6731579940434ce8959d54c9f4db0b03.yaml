type: spec.insomnia.rest/5.0
name: cepher
meta:
  id: wrk_6731579940434ce8959d54c9f4db0b03
  created: 1762747905367
  modified: 1762747905367
  description: ""
collection:
  - name: cluster
    meta:
      id: fld_89648169513e4892b8594a2493381379
      created: 1762777442425
      modified: 1762777442425
      sortKey: -1762777442425
      description: ""
    children:
      - url: "{{ _.base_url }}/clusters"
        name: /clusters
        meta:
          id: req_2670c734b691465797f30903eb995640
          created: 1762777442426
          modified: 1762777442426
          isPrivate: false
          description: list clusters
          sortKey: -1762777442426
        method: GET
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.base_url }}/clusters"
        name: /clusters
        meta:
          id: req_33c1dcc61c594c15ab7a50a42c672014
          created: 1762777442426
          modified: 1762845761020
          isPrivate: false
          description: register cluster
          sortKey: -1762777442426
        method: POST
        body:
          mimeType: application/json
          text: |-
            {
              "name": "",
              "hosts": [],
              "key": ""
            }
        headers:
          - name: Content-Type
            value: application/json
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
cookieJar:
  name: Default Jar
  meta:
    id: jar_fff2982d84334da166659d7c22a88f9cd75fc9f3
    created: 1762747905371
    modified: 1762747905371
environments:
  name: Base Environment
  meta:
    id: env_fff2982d84334da166659d7c22a88f9cd75fc9f3
    created: 1762747905370
    modified: 1762835062921
    isPrivate: false
  data:
    scheme: http
    host: 192.168.56.183:8080
    base_path: ""
    base_url: "{{ _.scheme }}://{{ _.host }}{{ _.base_path }}"
  subEnvironments:
    - name: OpenAPI env api.rest.rodeo
      meta:
        id: env_4aeb803336d146439ddd1a23f70125bf
        created: 1762777442425
        modified: 1762777442425
        isPrivate: false
        sortKey: 1762777442425
      data:
        scheme: https
        base_path: ""
        host: api.rest.rodeo
spec:
  contents:
    openapi: 3.0.4
    info:
      title: cepher
      version: 0.0.0
      description: cepher
      contact:
        name: Support
        email: sup@rest.rodeo
    servers:
      - url: https://api.rest.rodeo
        description: Live
    tags:
      - name: cluster
    paths:
      /clusters:
        post:
          description: register cluster
          operationId: register.cluster
          tags:
            - cluster
          requestBody:
            content:
              application/json:
                schema:
                  $ref: "#/components/schemas/RegisterCluster"
          responses:
            "201":
              description: cluster registered
              content:
                application/json:
                  schema:
                    $ref: "#/components/schemas/Cluster"
            "400":
              description: bad requests
            "500":
              description: internal server error
              content:
                application/json:
                  schema:
                    $ref: "#/components/schemas/Error"
        get:
          description: list clusters
          operationId: list.clusters
          tags:
            - cluster
          responses:
            "200":
              description: success
              content:
                application/json:
                  schema:
                    type: array
                    items:
                      $ref: "#/components/schemas/Cluster"
            "204":
              description: no contents
            "500":
              description: internal server error
              content:
                application/json:
                  schema:
                    $ref: "#/components/schemas/Error"
    components:
      schemas:
        Error:
          type: object
          properties:
            message:
              type: string
          required:
            - message
        RegisterCluster:
          type: object
          properties:
            name:
              type: string
            hosts:
              type: array
              items:
                type: string
              minItems: 1
            key:
              type: string
          required:
            - name
            - hosts
            - key
        Cluster:
          type: object
          properties:
            id:
              type: string
            name:
              type: string
            status:
              type: string
              enum:
                - HEALTH_OK
                - HEALTH_WARN
                - HEALTH_ERR
            is_stable:
              type: boolean
              description: 일정 시간 이상 HEALTH_OK가 유지되는 상태
            detail:
              description: cluster 상태가 좋지 않을때, 해당 이유에 대해 보여준다.
          required:
            - id
            - name
            - status
            - is_stable
  meta:
    id: spc_29e65de7630742dc863a1888f7bb389b
    created: 1762747969141
    modified: 1762852905086
